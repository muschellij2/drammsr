.. raw:: html

   <!--

   ============================================================================

      DO NOT EDIT THIS FILE! It was generated using Sphinx from:

      Origin:   $URL: https://sbia-svn.uphs.upenn.edu/projects/DRAMMS/branches/dramms-1.4/doc/tutorials/BrainSkullStripped.rst $
      Revision: $Rev: 1900 $

   ============================================================================

   -->

.. title:: Skull-stripped Brain Image Registration by DRAMMS


Tutorial 3: Brain MRI of Different Subjects (Skull-stripped)
===============================================================

Introduction
------------

Registering skull-stripped and healthy brain images across subjects is a classic problem in image registration. Typical applications include atlas construction and atlas-based structure/ROI labeling. It is also one of the first steps for sub-population differentiation (e.g., normal v.s. dementia populations).


Result
------

.. _fig3a_3DHealthyBrain_SkullStripped:

.. only:: html
    
    .. figure::   3a_3DHealthyBrain_SkullStripped.png
       :alt:      Registration of skull-stripped brain MR images of different subjects.
       :align:    center
       :width:    80%
       :figwidth: 80%
       
       Registration of 3D brain MR images from two different subjects (skull-stripped).

.. only:: latex
    
    .. figure::   3a_3DHealthyBrain_SkullStripped.png
       :alt:      Registration of skull-stripped brain MR images of different subjects.
       :align:    center
       :width:    65%
       :figwidth: 65%
       
       Registration of 3D brain MR images from two different subjects (skull-stripped).
 

Command
-------

::

    dramms -S src_brain1.nii.gz  -T trg_brain2.nii.gz  
           -O src2trg.nii.gz     -D def_src2trg.nii.gz  


		   
Other Options
--------------

Usually, the default parameter setting gives reasonable results in cross-subject brain MR registration tasks. 
 
If one wants to make the deformation smoother (often less accurate) or more aggressive, one can look at the smoothness weight, i.e., the ``-g`` option. This weight is usually between 0 to 1, higher weight for smoother deformation. The default weight is 0.2 (i.e., ``-g 0.2``). 

If one wants to recover larger or smaller deformations than default parameters, please look at the ``-x``, ``-y`` and/or ``-z`` options. They are directly related to the search range in the x, y, z directions.



Resources Needed
----------------

Registering this pair of 3D images (target image space 256 x 256 x 124 voxels, 1.0 x 1.0 x 1.0 mm^3/voxel) takes 5.9 GB memory and finishes in 38 minutes in Linux OS (2.80GHz CPU). 

If one has less memory to offer, please look at the option ``-u`` to reduce the memory usage to other levels, the lowest level being 1.6GB for this pair of images.  


A rule of thumb is that, the computational time and memory usage go up when image size increases: the computational time is roughly linear to the image size, and the memory consumption is roughly linear to the square root of the image size.


.. Start a new page in LaTeX/PDF output after the changes.
.. raw:: latex

    \clearpage
